<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TEST Web</title>
    {% load static %}
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.8/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.8/dist/semantic.min.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/multi-swap.js"></script>

    <style>
        :root {
            --bg-color: rgba(20 20 20 / 100%);
            --bg-color-content: rgba(50 50 50 / 75%);
            --text-color: rgba(220 220 220 / 80%);

            --border-radius: 1rem;
        }
        .htmx_root {
            padding: 2%;
            height: 100%;
        }
        body {
            display: flex;
            flex-direction: column;
            color: var(--text-color);
            background-color: var(--bg-color);
        }
        nav {
            display: flex;
            border: solid 2px red;
        }
        nav > ul {
            list-style: none;
            padding: 2rem;
        }
        .nav-item-link {
            font-size: large;
            border-radius: var(--border-radius);
            padding: 0.25rem;
            transition: 0.5s ease;
        }
        .nav-item-link:hover {
            background-color: var(--bg-color-content);
        }
        main {
            display: flex;
            flex-grow: 1;
            flex-direction: column;
            border: solid 2px green;
        }
        .app {
            display: flex;
            flex-direction: row;
            flex-grow: 1;
        }
        .headline > ul {
            display: flex;
            flex-direction: row;
            gap: 1.5rem;
            list-style: none;
        }
        form {
            display: grid;
            grid-template-columns: 1fr auto;
            height: fit-content;
            width: fit-content;
            grid-column-gap: 1rem;
            grid-row-gap: 0.5rem;
        }
        .content {
            margin: 2rem;
        }
        .content-head {
            margin: 0 auto;
            padding-bottom: 1rem;
        }
        .grid {
            display: grid;
            grid-template-columns: auto auto;
        }
        .status {
            display: flex;
            flex-direction: row;
            gap: 2rem;
            padding: 1rem;
        }
        .status-card {
            border-radius: var(--border-radius);
            background-color: var(--bg-color-content);
            padding: 0.5rem;
        }
        .status-head {
            font-size: large;
            padding-bottom: 1rem;
        }
        .status-ws {
            display: grid;
            grid-template-columns: 1fr auto;
            grid-column-gap: 1rem;
            grid-row-gap: 0.5rem;
        }
        .status-ws >label::after {
            content: ":";
        }
    </style>
</head>
<body>
    <div class="headline">

        <ul>
            <li>
                <a class="nav-item-link" href="{% url 'main:index' %}" hx-get="{% url 'main:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Home
                </a>
            </li>
            <li>
                <a class="nav-item-link" href="{% url 'observation:index' %}" hx-get="{% url 'observation:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Observation
                </a>
            </li>
            <li>
                <a class="nav-item-link" href="{% url 'catalog:index' %}" hx-get="{% url 'catalog:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Catalog
                </a>
            </li>
            <li>
                <a class="nav-item-link" href="{% url 'catalog:index' %}" hx-get="{% url 'catalog:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Weather
                </a>
            </li>
            <li>
                <a class="nav-item-link" href="{% url 'camera:index' %}" hx-get="{% url 'camera:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Camera
                </a>
            </li>
            <li>
                <a class="nav-item-link" href="{% url 'mount:index' %}" hx-get="{% url 'mount:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Mount
                </a>
            </li>
            <li>
                <a class="nav-item-link" href="{% url 'dome:index' %}" hx-get="{% url 'mount:index' %}" hx-target="#htmx_root" hx-push-url="true">
                    Dome
                </a>
            </li>
        </ul>
    </div>
    <div class="app" id="htmx_root">
        <main id="htmx_content">
            {% if inner_template %}
                {% include inner_template %}
            {% endif %}
        </main>

    </div>
    <div class="status" hx-ext="multi-swap" hx-swap="multi:#camera_status,#mount_status,#filter_wheel_status,#weather_status,#dome_status" hx-trigger="every 1s" hx-get="{% url 'status:device' %}">
    {% component_block 'status_card' head='Camera' %}
      {% fill 'content' %}
        <div id="camera_status" class="status-ws" hx-get="{% url 'camera:status' %}" hx-trigger="load" hx-swap="innerHTML">

        </div>
        <!--<div class="status-ws" hx-ext="ws" ws-connect="/ws/status/camera/">
          <label>Status</label>
          <span>Ideal</span>
          <label>Temperature</label>
          <span>-10</span>
          <label>Cooler</label>
          <span>On</span>
        </div>-->
      {% endfill %}
    {% endcomponent_block %}
    {% component_block 'status_card' head='Fiter wheel' %}
      {% fill 'content' %}
        <div id="filter_wheel_status" class="status-ws">

        </div>
      {% endfill %}

    {% endcomponent_block %}
    {% component_block 'status_card' head='Mount' %}
      {% fill 'content' %}
        <div id="mount_status" class="status-ws" hx-get="{% url 'mount:status' %}" hx-trigger="load" hx-swap="innerHTML">

        </div>
        <!--<div class="status-ws" hx-ext="ws" ws-connect="/ws/status/mount/">
          <label>Status</label>
          <span>Trackking</span>
          <label>Ra/Dec</label>
          <span>-10</span>
          <label>Alt/Az</label>
          <span>On</span>
        </div>-->
      {% endfill %}
    {% endcomponent_block %}
    {% component_block 'status_card' head='Dome' %}
      {% fill 'content' %}
        <div id="dome_status" class="status-ws"></div>
      {% endfill %}
    {% endcomponent_block %}
    {% component_block 'status_card' head='Weather' %}
      {% fill 'content' %}
        <div id="weather_status" class="status-ws"></div>
      {% endfill %}

    {% endcomponent_block %}
  </div>

</body>
</html>